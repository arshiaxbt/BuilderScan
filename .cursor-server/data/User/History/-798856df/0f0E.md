# Valshi-X ğŸ‹

**Whale Trade Detector & X Poster Bot**

A Python bot that monitors [Kalshi](https://kalshi.com) for large trades (>$100K) and automatically posts them to X (Twitter) with user-friendly formatting.

## Features

- ğŸ” **Real-time Monitoring**: Continuously monitors Kalshi for whale trades
- ğŸ‹ **Whale Detection**: Automatically detects trades over $100K
- ğŸ¦ **Auto-posting**: Posts formatted tweets to X with market details
- ğŸ“Š **User-friendly Format**: Clean, readable tweets with market info and links
- ğŸ”„ **Deduplication**: Tracks posted trades to avoid duplicates
- âš¡ **Efficient**: Caches market data to minimize API calls

## Requirements

- Python 3.8+
- Kalshi API credentials (API Key ID + Private Key)
- X (Twitter) API credentials (API Key, Secret, Access Token, Access Token Secret)

## Installation

1. **Clone or download this repository**

2. **Install dependencies**:
```bash
pip install -r requirements.txt
```

3. **Configure credentials**:
   - Your credentials are already set in `credentials.py`
   - **IMPORTANT**: Never commit this file to version control!

## Usage

### Running the Bot

```bash
python bot.py
```

The bot will:
1. Connect to Kalshi and X APIs
2. Start monitoring for whale trades every 60 seconds
3. Post tweets automatically when whales are detected
4. Run continuously until stopped with Ctrl+C

### Configuration

You can adjust settings in `credentials.py`:

- `WHALE_THRESHOLD_DOLLARS`: Minimum trade value to be considered a whale (default: 100000)
- `CHECK_INTERVAL_SECONDS`: Seconds between checks (default: 60)

## Tweet Format

Tweets are formatted to be user-friendly and informative:

```
ğŸ‹ Whale Alert!

$125K trade on [Market Title]

ğŸ“Š 50,000 YES contracts @ 25Â¢ (25%)

@Kalshi @KalshiEco

https://kalshi.com/markets/[TICKER]
```

## Project Structure

```
valshi-x/
â”œâ”€â”€ bot.py                 # Main bot script
â”œâ”€â”€ config.py              # Configuration management
â”œâ”€â”€ credentials.py         # API credentials (DO NOT COMMIT!)
â”œâ”€â”€ kalshi_client.py       # Kalshi API client
â”œâ”€â”€ x_client.py            # X (Twitter) API client
â”œâ”€â”€ trade_monitor.py       # Trade monitoring logic
â”œâ”€â”€ tweet_formatter.py     # Tweet formatting
â”œâ”€â”€ requirements.txt       # Python dependencies
â”œâ”€â”€ .gitignore            # Git ignore rules
â””â”€â”€ README.md             # This file
```

## How It Works

1. **Authentication**: Authenticates with both Kalshi (using RSA key signing) and X APIs
2. **Monitoring**: Fetches recent trades from Kalshi every 60 seconds
3. **Filtering**: Identifies trades over $100K threshold
4. **Deduplication**: Tracks trade IDs to avoid posting duplicates
5. **Market Lookup**: Fetches market details for context
6. **Formatting**: Creates user-friendly tweet with emojis, amounts, and links
7. **Posting**: Posts to X with proper mentions (@Kalshi @KalshiEco)

## API Information

### Kalshi API
- **Documentation**: https://docs.kalshi.com/
- **Base URL**: https://api.elections.kalshi.com/trade-api/v2
- **Authentication**: RSA private key signing
- **Rate Limits**: Handled automatically with token refresh

### X API
- **Documentation**: https://docs.x.com/
- **Tier**: Free tier (write access only)
- **Authentication**: OAuth 1.0a
- **Rate Limits**: Respects X API rate limits

## Troubleshooting

### "Failed to authenticate with Kalshi API"
- Check that your API Key ID and Private Key are correct
- Ensure the private key includes the full PEM format with headers

### "Failed to connect to X API"
- Verify all X API credentials are correct
- Ensure your X app has write permissions
- Check that you're using OAuth 1.0a credentials

### "Tweet truncated"
- Some market titles are very long and get truncated to fit 280 character limit
- The bot handles this automatically

### No whale trades detected
- Whale trades >$100K are relatively rare
- You can lower the threshold in `credentials.py` for testing
- Check Kalshi.com to see recent market activity

## Security Notes

âš ï¸ **Important Security Reminders**:
- Never commit `credentials.py` to version control
- Keep your API keys secure and private
- Rotate keys if they're ever exposed
- Use `.gitignore` to exclude sensitive files

## Support

For issues with:
- **Kalshi API**: https://docs.kalshi.com/
- **X API**: https://docs.x.com/
- **This Bot**: Check the code comments or modify as needed

## License

This bot is provided as-is for personal use. Ensure compliance with Kalshi and X's Terms of Service when using their APIs.

---

**Happy whale watching! ğŸ‹ğŸ“Š**

