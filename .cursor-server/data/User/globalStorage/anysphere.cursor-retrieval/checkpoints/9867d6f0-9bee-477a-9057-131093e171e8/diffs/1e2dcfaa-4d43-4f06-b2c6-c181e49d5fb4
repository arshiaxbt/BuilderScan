{"fsPath":"/root/apps/web/src/ui/App.tsx","fileUuid":"1e2dcfaa-4d43-4f06-b2c6-c181e49d5fb4","fileSizeBytes":3602,"numLines":107,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":108,"addedLines":["import React from 'react';","import useSWR from 'swr';","","type LeaderItem = {","\tcode: string;","\ttxCount: number;","\tvolumeEth: string;","\tfeeEstimateEth: string;","\tappUrl: string | null;","\townerAddress: string;","};","","const fetcher = (url: string) => fetch(url).then((r) => r.json());","","function openAppWithBuilderCode(targetUrl: string, builderCode: string) {","\tconst url = new URL(targetUrl);","\turl.searchParams.set('builder', builderCode);","","\t// If inside Base Mini App environment, prefer native open","\t// Fallback to window.open otherwise","\ttry {","\t\t// @ts-ignore","\t\tif (window?.BaseMiniApp?.openURL) {","\t\t\t// @ts-ignore","\t\t\twindow.BaseMiniApp.openURL(url.toString());","\t\t} else {","\t\t\twindow.open(url.toString(), '_blank', 'noopener,noreferrer');","\t\t}","\t} catch {","\t\twindow.open(url.toString(), '_blank', 'noopener,noreferrer');","\t}","}","","export const App: React.FC = () => {","\tconst { data } = useSWR<{ items: LeaderItem[] }>('/api/leaderboard', fetcher, {","\t\trefreshInterval: 15_000","\t});","\tconst items = data?.items ?? [];","\tconst ourBuilderCode = (import.meta as any).env?.VITE_BUILDER_CODE ?? 'builderscan';","","\treturn (","\t\t<div style={{ minHeight: '100dvh', background: '#0b1220', color: '#e5e7eb' }}>","\t\t\t<div style={{ maxWidth: 960, margin: '0 auto', padding: '24px' }}>","\t\t\t\t<header style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>","\t\t\t\t\t<h1 style={{ fontSize: 24, margin: 0 }}>BuilderScan</h1>","\t\t\t\t\t<div style={{ opacity: 0.8, fontSize: 12 }}>Live explorer + leaderboard for builder codes</div>","\t\t\t\t</header>","\t\t\t\t<section style={{ marginTop: 24 }}>","\t\t\t\t\t<table style={{ width: '100%', borderCollapse: 'collapse' }}>","\t\t\t\t\t\t<thead>","\t\t\t\t\t\t\t<tr style={{ textAlign: 'left', color: '#9ca3af' }}>","\t\t\t\t\t\t\t\t<th style={{ padding: '8px 12px' }}>Rank</th>","\t\t\t\t\t\t\t\t<th style={{ padding: '8px 12px' }}>Code</th>","\t\t\t\t\t\t\t\t<th style={{ padding: '8px 12px' }}>Owner</th>","\t\t\t\t\t\t\t\t<th style={{ padding: '8px 12px' }}>Tx</th>","\t\t\t\t\t\t\t\t<th style={{ padding: '8px 12px' }}>Volume (ETH)</th>","\t\t\t\t\t\t\t\t<th style={{ padding: '8px 12px' }}>Est. Fees (ETH)</th>","\t\t\t\t\t\t\t\t<th style={{ padding: '8px 12px' }}>Open</th>","\t\t\t\t\t\t\t</tr>","\t\t\t\t\t\t</thead>","\t\t\t\t\t\t<tbody>","\t\t\t\t\t\t\t{items.map((it, idx) => (","\t\t\t\t\t\t\t\t<tr key={it.code} style={{ borderTop: '1px solid #1f2937' }}>","\t\t\t\t\t\t\t\t\t<td style={{ padding: '10px 12px' }}>{idx + 1}</td>","\t\t\t\t\t\t\t\t\t<td style={{ padding: '10px 12px', fontFamily: 'monospace' }}>{it.code}</td>","\t\t\t\t\t\t\t\t\t<td style={{ padding: '10px 12px', fontFamily: 'monospace' }}>","\t\t\t\t\t\t\t\t\t\t{it.ownerAddress.slice(0, 6)}…{it.ownerAddress.slice(-4)}","\t\t\t\t\t\t\t\t\t</td>","\t\t\t\t\t\t\t\t\t<td style={{ padding: '10px 12px' }}>{it.txCount}</td>","\t\t\t\t\t\t\t\t\t<td style={{ padding: '10px 12px' }}>{Number(it.volumeEth).toFixed(4)}</td>","\t\t\t\t\t\t\t\t\t<td style={{ padding: '10px 12px' }}>{Number(it.feeEstimateEth).toFixed(6)}</td>","\t\t\t\t\t\t\t\t\t<td style={{ padding: '10px 12px' }}>","\t\t\t\t\t\t\t\t\t\t{it.appUrl ? (","\t\t\t\t\t\t\t\t\t\t\t<button","\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => openAppWithBuilderCode(it.appUrl!, ourBuilderCode)}","\t\t\t\t\t\t\t\t\t\t\t\tstyle={{","\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: '#2563eb',","\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: 'white',","\t\t\t\t\t\t\t\t\t\t\t\t\tborder: 0,","\t\t\t\t\t\t\t\t\t\t\t\t\tpadding: '8px 12px',","\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: 8,","\t\t\t\t\t\t\t\t\t\t\t\t\tcursor: 'pointer'","\t\t\t\t\t\t\t\t\t\t\t\t}}","\t\t\t\t\t\t\t\t\t\t\t>","\t\t\t\t\t\t\t\t\t\t\t\tOpen","\t\t\t\t\t\t\t\t\t\t\t</button>","\t\t\t\t\t\t\t\t\t\t) : (","\t\t\t\t\t\t\t\t\t\t\t<span style={{ color: '#9ca3af' }}>—</span>","\t\t\t\t\t\t\t\t\t\t)}","\t\t\t\t\t\t\t\t\t</td>","\t\t\t\t\t\t\t\t</tr>","\t\t\t\t\t\t\t))}","\t\t\t\t\t\t</tbody>","\t\t\t\t\t</table>","\t\t\t\t\t{items.length === 0 && (","\t\t\t\t\t\t<div style={{ marginTop: 32, color: '#9ca3af' }}>","\t\t\t\t\t\t\tNo data yet. Run the indexers to populate builder codes and attributions.","\t\t\t\t\t\t</div>","\t\t\t\t\t)}","\t\t\t\t</section>","\t\t\t</div>","\t\t</div>","\t);","};","","",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000004,1000005,1000006,1000007,1000008,1000009,1000010,1000002,1000011,1000002,1000012,1000013,1000014,1000002,1000015,1000016,1000017,1000018,1000019,1000020,1000021,1000022,1000023,1000024,1000025,1000026,1000027,1000028,1000002,1000029,1000030,1000031,1000032,1000033,1000034,1000002,1000035,1000036,1000037,1000038,1000039,1000040,1000041,1000042,1000043,1000044,1000045,1000046,1000047,1000048,1000049,1000050,1000051,1000052,1000053,1000054,1000055,1000056,1000057,1000058,1000059,1000060,1000061,1000062,1000063,1000064,1000065,1000066,1000067,1000068,1000069,1000070,1000071,1000072,1000073,1000074,1000075,1000076,1000077,1000078,1000079,1000080,1000081,1000082,1000083,1000062,1000084,1000085,1000086,1000087,1000088,1000089,1000090,1000091,1000092,1000093,1000094,1000095,1000096,1000010,1000002,1000002,1000002]}],"gitInfo":{"noRepoFound":true},"kind":"KIND_ADDED"}