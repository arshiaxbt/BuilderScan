{"fsPath":"/root/itsbot/test_connection.py","fileUuid":"e6aa5465-60bf-4e9b-bb48-526e58d2def8","fileSizeBytes":3115,"numLines":87,"diffChanges":[{"originalStartLineNumberOneIndexed":1,"originalEndLineNumberExclusiveOneIndexed":1,"modifiedStartLineNumberOneIndexed":1,"modifiedEndLineNumberExclusiveOneIndexed":88,"addedLines":["#!/usr/bin/env python3","\"\"\"Test script to verify bot can connect and make requests\"\"\"","import asyncio","import aiohttp","import datetime","","URL = \"https://www.itstheseason.christmas/api/advent/claim\"","TEST_WALLET = \"0xFfbdC115f419ABeD23888812f00D10F12EF6DA3e\"","","HEADERS = {","    \"accept\": \"*/*\",","    \"content-type\": \"application/json\",","    \"origin\": \"https://www.itstheseason.christmas\",","    \"referer\": \"https://www.itstheseason.christmas/\",","    \"user-agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36\",","}","","async def test_connection():","    print(\"üß™ Testing bot connection and configuration...\")","    print(f\"üéØ Target URL: {URL}\")","    print(f\"üí∞ Test Wallet: {TEST_WALLET}\")","    print(f\"üïê Current UTC Time: {datetime.datetime.utcnow().strftime('%Y-%m-%d %H:%M:%S')}\")","    print(\"\")","    ","    # Test 1: Can we resolve DNS?","    print(\"1Ô∏è‚É£ Testing DNS resolution...\")","    try:","        connector = aiohttp.TCPConnector(ttl_dns_cache=300)","        async with aiohttp.ClientSession(connector=connector) as session:","            print(\"   ‚úÖ DNS resolver initialized\")","    except Exception as e:","        print(f\"   ‚ùå DNS error: {e}\")","        return","    ","    # Test 2: Can we connect to the website?","    print(\"2Ô∏è‚É£ Testing connection to website...\")","    try:","        async with aiohttp.ClientSession() as session:","            async with session.get(","                \"https://www.itstheseason.christmas/\",","                timeout=aiohttp.ClientTimeout(total=5),","                ssl=False","            ) as resp:","                print(f\"   ‚úÖ Connected! Status: {resp.status}\")","    except Exception as e:","        print(f\"   ‚ùå Connection error: {e}\")","        return","    ","    # Test 3: Can we make API request?","    print(\"3Ô∏è‚É£ Testing API endpoint (expected to fail - testing connection)...\")","    try:","        async with aiohttp.ClientSession() as session:","            # Try to claim hour 1 (will likely fail but tests connection)","            payload = {","                \"walletAddress\": TEST_WALLET,","                \"hour\": 1,","            }","            async with session.post(","                URL,","                json=payload,","                headers=HEADERS,","                timeout=aiohttp.ClientTimeout(total=5),","                ssl=False","            ) as resp:","                body = await resp.text()","                print(f\"   Status: {resp.status}\")","                print(f\"   Response: {body[:200]}\")","                ","                if \"error\" in body.lower():","                    print(f\"   ‚ÑπÔ∏è  Error response is NORMAL (not during claim window)\")","                    print(f\"   ‚úÖ API endpoint is reachable!\")","                else:","                    print(f\"   ‚úÖ API responded successfully!\")","                    ","    except Exception as e:","        print(f\"   ‚ùå API request error: {e}\")","        return","    ","    print(\"\")","    print(\"üéâ All tests passed! Bot can connect and communicate.\")","    print(\"‚è∞ Bot will claim at the top of each hour (XX:59:58 - XX:00:10)\")","    print(f\"üîú Next claim window: {datetime.datetime.utcnow().hour + 1}:00 UTC\")","","if __name__ == \"__main__\":","    asyncio.run(test_connection())","",""],"tokenizedAddedLines":[1000000,1000001,1000002,1000003,1000004,1000005,1000006,1000007,1000005,1000008,1000009,1000010,1000011,1000012,1000013,1000014,1000005,1000015,1000016,1000017,1000018,1000019,1000020,1000021,1000022,1000023,1000024,1000025,1000026,1000027,1000028,1000029,1000030,1000021,1000031,1000032,1000024,1000033,1000034,1000035,1000036,1000037,1000038,1000039,1000028,1000040,1000030,1000021,1000041,1000042,1000024,1000033,1000043,1000044,1000045,1000046,1000047,1000048,1000049,1000050,1000051,1000036,1000037,1000038,1000052,1000053,1000054,1000055,1000056,1000057,1000058,1000059,1000060,1000061,1000028,1000062,1000030,1000021,1000020,1000063,1000064,1000065,1000005,1000066,1000067,1000005,1000005]}],"gitInfo":{"gitInfo":{"gitRoot":"/root/itsbot","branch":"main","commitHash":"e659b0e2194cfc098e10bc80ee7d41ca763e1db8"}},"kind":"KIND_ADDED"}